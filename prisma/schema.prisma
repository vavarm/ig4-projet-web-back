// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum EnumTailleTShirt {
  XS
  S
  M
  L
  XL
  XXL
}

enum EnumHebergement {
  PROPOSE
  RECHERCHE
}

enum EnumRole {
  Admin
  Observateur
  Benevole
}

type Time {
  hours   Int
  minutes Int
}

model Benevole {
  id               Bytes            @id @default(auto()) @map("_id") @db.ObjectId
  nom              String
  prenom           String
  email            String           @unique
  password         String
  adressePostale   String
  codePostal       String
  ville            String
  telephone        String
  associations     Association[]    @relation(fields: [associationIds], references: [id])
  associationIds   Bytes[]          @db.ObjectId
  taille_tshirt    EnumTailleTShirt
  vegetarien       Boolean
  hebergement      EnumHebergement?
  role             EnumRole
  compteValide     Boolean
  PosteReference   Poste?           @relation(fields: [posteReferenceId], references: [id])
  posteReferenceId Bytes?           @db.ObjectId
  PlanningPoste    PlanningPoste[]
  PlanningEspace   PlanningEspace[]
}

model Association {
  id          Bytes      @id @default(auto()) @map("_id") @db.ObjectId
  nom         String
  benevoles   Benevole[] @relation(fields: [benevoleIds], references: [id])
  benevoleIds Bytes[]    @db.ObjectId
  mail        String
}

model Poste {
  id            Bytes           @id @default(auto()) @map("_id") @db.ObjectId
  nom           String
  nbPlaces      Int
  referents     Benevole[]
  Message       Message[]
  espaces       Espace[]
  PlanningPoste PlanningPoste[]
}

model Jeu {
  id          Bytes   @id @default(auto()) @map("_id") @db.ObjectId
  titre       String
  editeur     String
  nbJoueurs   String
  recu        Boolean
  lienSiteWeb String
  Espace      Espace  @relation(fields: [espaceId], references: [id])
  espaceId    Bytes   @db.ObjectId
}

model Espace {
  id             Bytes            @id @default(auto()) @map("_id") @db.ObjectId
  nom            String
  jeux           Jeu[]
  nbPlaces       Int
  Poste          Poste?           @relation(fields: [posteId], references: [id])
  posteId        Bytes?           @db.ObjectId
  PlanningEspace PlanningEspace[]
}

model Message {
  id              Bytes    @id @default(auto()) @map("_id") @db.ObjectId
  poste           Poste    @relation(fields: [posteId], references: [id])
  posteId         Bytes    @db.ObjectId
  message         String
  datePublication DateTime @default(now())
}

model Jour {
  id             Bytes            @id @default(auto()) @map("_id") @db.ObjectId
  label          String
  CreneauHoraire CreneauHoraire[]
}

model CreneauHoraire {
  id             Bytes            @id @default(auto()) @map("_id") @db.ObjectId
  horaireDebut   Time
  horaireFin     Time
  jour           Jour             @relation(fields: [jourId], references: [id])
  jourId         Bytes            @db.ObjectId
  PlanningPoste  PlanningPoste[]
  PlanningEspace PlanningEspace[]
}

model PlanningPoste {
  id               Bytes          @id @default(auto()) @map("_id") @db.ObjectId
  poste            Poste          @relation(fields: [posteId], references: [id])
  posteId          Bytes          @db.ObjectId
  benevole         Benevole       @relation(fields: [benevoleId], references: [id])
  benevoleId       Bytes          @db.ObjectId
  creneauHoraire   CreneauHoraire @relation(fields: [creneauHoraireId], references: [id])
  creneauHoraireId Bytes          @db.ObjectId
  flexible         Boolean
}

model PlanningEspace {
  id               Bytes          @id @default(auto()) @map("_id") @db.ObjectId
  espace           Espace?        @relation(fields: [espaceId], references: [id])
  espaceId         Bytes?         @db.ObjectId
  benevole         Benevole       @relation(fields: [benevoleId], references: [id])
  benevoleId       Bytes          @db.ObjectId
  creneauHoraire   CreneauHoraire @relation(fields: [creneauHoraireId], references: [id])
  creneauHoraireId Bytes          @db.ObjectId
}
